@model IEnumerable<VR.Models.Target_TemplateInfo>

@{
    ViewBag.Title = "Seed Code for Targets and their Posses";
}

<h2>Targets</h2>


@foreach (var item in Model)
{
    <pre>   
                var target@(item.Name.Replace(" ", "_").Replace(".","")) = new Target
                {
                    Name = "@Html.DisplayFor(modelItem => item.Name)",
                    Party = "@Html.DisplayFor(modelItem => item.Party)",
                    Region = "@Html.DisplayFor(modelItem => item.Region)",
                    IsIncumbent = @item.IsIncumbent.ToString().ToLower(),
                    IsActive = @item.IsActive.ToString().ToLower(),
                    CountryId = 1,
                    GovernmentLevelId = @Html.DisplayFor(modelItem => item.GovernmentLevelId),
                    HouseId = @Html.DisplayFor(modelItem => item.HouseId),
                    GeneralElectionDate = new DateTime(@item.GeneralElectionDate.Year, @item.GeneralElectionDate.Month, @item.GeneralElectionDate.Day), 
                    @if (item.PrimaryDate != null)                    
                    {
                    <text>PrimaryDate =  new DateTime(@((@item.PrimaryDate.Value).Year), @((@item.PrimaryDate.Value).Month), @((@item.PrimaryDate.Value).Day)),  </text>
                    }  else {
                    <text>PrimaryDate = null, </text>
                    } 
                    @if (item.ConventionDate != null)                    
                    {
                    <text>ConventionDate =  new DateTime(@((@item.ConventionDate.Value).Year), @((@item.ConventionDate.Value).Month), @((@item.ConventionDate.Value).Day)),  </text>
                    }else {
                    <text>ConventionDate = null, </text>
                    } 
                    IsBadOnTPP = @item.IsBadOnTPP.ToString().ToLower(),
                    IsGoodOnTPP = @item.IsGoodOnTPP.ToString().ToLower(),
                    TPPGoodBadReason = "@Html.DisplayFor(modelItem => item.TPPGoodBadReason)"
                };
                context.Targets.Add(target@(item.Name.Replace(" ", "_").Replace(".", "")));
            </pre>
}



<pre>////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// </pre>


<h2>Posses</h2>

@foreach (var item in Model)
{
    <pre>   
                  context.Posses.Add(
                    new Posse 
                    {
                        Name = "Anti-TPP Git @item.Name.Split(' ').Last() Posse",
                        Info = "Posse #" + <text>target</text>@(item.Name.Replace(" ", "_").Replace(".","")).Id<text> + " Info",</text>
                        TargetId = target@(item.Name.Replace(" ", "_").Replace(".","")).Id,
                        State = ObjectState.State.Added
                    }
                  ); 
     </pre>
}



<pre>////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// </pre>


<h2>Campaigns and CampaignPhases</h2>






<pre>       int TargetId = 0;</pre>

@foreach (var item in Model)
{


    if (item.Region == "US")
    {
        <pre> 
                TargetId = <text>target</text>@(item.Name.Replace(" ", "_").Replace(".","")).Id;
                var posseToAddCampaign = context.Posses.Find(TargetId);
                posseToAddCampaign.Campaigns = new List<campaign>()
                {
                    // Trump NJ Campaign
                    new Campaign()
                    {
                        Name = "Wake up the @item.Party Party on TPP, Mr. Trump!",   
                        IsMultiphasic = true,
                        Issue = "The Trans-Pacific Partnership, TPP",
                        TargetMacroRegion = "USA",
                        TargetElectoralRegionName = "New Jersey",
                        TargetElectoralRegionAbbreviation = "NJ",
                        ElectionYear = 2016,
                        PrimaryDate = new DateTime(2016, 6, 7),
                        GeneralDate = new DateTime(2016, 11, 8),
                        IsPresidential = true,
                        UltimateRedline = null,
                        Info = @@"Possibly the worst piece of legislation in US history, TPP promises to subvert Constitutional order in favor of multinational corporations. These corporations will be able to sue for ""anticipated loss of profits"", and disputes will be adjudicated by a tribunal of corporate appointed lawyers.",
                        CampaignPhases = new List<campaignphase>()
                        {
                            new CampaignPhase()
                            {
                                Number = 1,
                                EndDate = new DateTime(2016, 6, 7),   // NJ Primary Day
                                VoteslingerPrimaryDeadline = new DateTime(2016, 5, 24),
                                VoteslingerGeneralDeadline = new DateTime(2016, 10, 11),
                                PledgeDeadline = new DateTime(2016, 5, 24),  
                                PledgeFulfillmentDeadline = new DateTime(2016, 6, 6),
                                DefaultPledgeIds = new List<int>()
                                {
                                    1,
                                    2,
                                    3,
                                    4,
                                    5,
                                    6
                                },
                                Redline = "Trump must lobby the Republicans in Congress on TPP and both publish the results on his website and give a press conference on the results."
                           
                            },
                            new CampaignPhase()
                            {
                                Number = 2,
                                EndDate = new DateTime(2016, 11, 8),   // Election Day
                                VoteslingerPrimaryDeadline = null,
                                VoteslingerGeneralDeadline = new DateTime(2016, 10, 11),
                                PledgeDeadline = new DateTime(2016, 10, 11),
                                PledgeFulfillmentDeadline = new DateTime(2016, 11, 7),  
                                DefaultPledgeIds = new List<int>()
                                {
                                    1,
                                    2,
                                    3,
                                    4,
                                    5,
                                    6
                                },
                                Redline = "Trump must condemn the silence of the Republican Party rank and file (in Congress) on TPP"
                            },
                            new CampaignPhase()
                            {
                                Number = 3,
                                EndDate = new DateTime(2017, 1, 20),   // Inauguration Day 
                                VoteslingerPrimaryDeadline = null,
                                VoteslingerGeneralDeadline = null,
                                PledgeDeadline = new DateTime(2017, 3, 11),  
                                PledgeFulfillmentDeadline = new DateTime(2017, 1, 19),
                                DefaultPledgeIds = new List<int>()
                                {
                                    1,
                                    2,
                                    3,
                                    4,
                                    5,
                                    6
                                },
                                Redline = "Trump must lead a protest against TPP in Washington, D.C."
                            }
                        }
                    }
		        };
    </pre>
    }
    <pre>context.SaveChanges();</pre>


}
